<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Forca - Consciência Negra</title>
    <style>
        :root {
            --deep: #0f172a;
            --gold: #f2b33d;
            --sunset: #f27d3d;
            --light: #fffbeb;
            --wrong: #ef4444;
            --correct: #34d399;
            --hint-bg: rgba(255,255,255,0.12);
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e293b, #0f172a);
            color: var(--light);
            height: 100vh;
            overflow: hidden;
        }
        /* Botão Voltar */
        .back-link {
            position: fixed;
            top: 58px;
            left: 18px;
            z-index: 120;
            display: inline-block;
            background: linear-gradient(45deg, var(--gold), var(--sunset));
            color: var(--deep);
            text-decoration: none;
            padding: 10px 14px;
            border-radius: 999px;
            font-weight: 800;
            font-size: 0.95rem;
            box-shadow: 0 8px 20px rgba(242,179,61,0.25);
            transition: transform 0.18s ease, box-shadow 0.18s ease, opacity 0.18s ease;
        }
        .back-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 28px rgba(242,179,61,0.4);
        }
        /* Crédito vertical */
        .credit {
            position: fixed;
            left: 12px;
            bottom: 40%;
            transform: rotate(-90deg);
            transform-origin: left center;
            font-size: 0.85rem;
            font-weight: 600;
            color: rgba(255,255,255,0.6);
            letter-spacing: 2px;
            z-index: 110;
        }
        /* Cabeçalho */
        .header {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: 45px;
            background: rgba(15,23,42,0.9);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            z-index: 100;
            border-bottom: 2px solid var(--gold);
        }
        .level-info {
            font-size: 0.95rem;
            font-weight: bold;
            color: var(--gold);
        }
        .xp-bar {
            width: 160px;
            height: 10px;
            background: #334155;
            border-radius: 5px;
            overflow: hidden;
            margin-left: 8px;
        }
        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--sunset));
            width: 0%;
            transition: width 0.8s ease;
        }
        .xp-text {
            font-size: 0.75rem;
            margin-left: 6px;
            color: var(--light);
        }
        /* Botão Próxima */
        .next-btn {
            position: fixed;
            top: 18px;
            right: 20px;
            z-index: 110;
            background: linear-gradient(45deg, var(--gold), var(--sunset));
            color: var(--deep);
            padding: 10px 24px;
            border-radius: 999px;
            font-weight: 800;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(242,179,61,0.35);
            transition: all 0.2s;
            display: none;
        }
        .next-btn:hover { transform: translateY(-3px); box-shadow: 0 12px 28px rgba(242,179,61,0.5); }
        /* Boosts */
        .boosts {
            display: flex;
            gap: 12px;
            margin: 8px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        .boost-btn {
            background: var(--hint-bg);
            border: 2px solid var(--gold);
            color: white;
            padding: 6px 12px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 110px;
        }
        .boost-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            border-color: #475569;
        }
        .boost-btn:hover:not(:disabled) {
            background: var(--gold);
            color: var(--deep);
            transform: scale(1.08);
        }
        /* Jogo */
        #game {
            display: none;
            width: 100%;
            height: 100%;
            padding: 50px 12px 12px;
            text-align: center;
        }
        .hangman-container {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .hint {
            font-size: 1rem;
            margin: 5px 0;
            color: var(--gold);
            font-style: italic;
            max-width: 90%;
        }
        /* PALAVRA DESCEU E NÃO SOBREPOE MAIS A FORCA */
        .word-display {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            letter-spacing: 0.08em;
            margin: 10px 0 10px 0;
            font-weight: bold;
            word-spacing: 0.12em;
            white-space: nowrap;
            position: relative;
            top: 0;
        }
        .keyboard {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 6px;
            margin-top: 5px;
            max-width: 520px;
            width: 95%;
        }
        .key {
            background: rgba(255,255,255,0.12);
            border: 2px solid var(--gold);
            color: white;
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            font-weight: bold;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }
        .key:hover { background: var(--gold); color: var(--deep); transform: scale(1.08); }
        .key:active { transform: scale(0.95); }
        .key.used { background: #475569; border-color: #475569; cursor: not-allowed; }
        .key.correct { background: var(--correct); border-color: var(--correct); }
        .key.wrong { background: var(--wrong); border-color: var(--wrong); }
        .hangman-svg { width: 160px; height: 200px; margin: 3px 0; }
        .message {
            font-size: 1.3rem;
            margin-top: 5px;
            font-weight: bold;
            min-height: 40px;
        }
    </style>
</head>
<body>

    <a class="back-link" href="index.html">Voltar</a>
    <div class="credit">Davi 8A</div>

    <!-- MENU -->
    <div id="menu" style="height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;">
        <h1 style="font-size:5rem;background:linear-gradient(45deg,var(--gold),var(--sunset));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">
            Jogo da Forca
        </h1>
        <p style="font-size:1.6rem;margin:30px 0;">Consciência Negra: História & Folclore</p>
        <button class="play" id="play-btn" style="padding:20px 60px;font-size:1.8rem;background:linear-gradient(45deg,var(--gold),var(--sunset));color:var(--deep);border:none;border-radius:999px;cursor:pointer;">PLAY</button>
    </div>

    <!-- JOGO -->
    <div id="game">
        <div class="header">
            <div style="display:flex;align-items:center;">
                <div class="level-info">Nível <span id="level">1</span></div>
                <div class="xp-bar"><div class="xp-fill" id="xp-fill"></div></div>
                <div class="xp-text" id="xp-text">0 / 100 XP</div>
            </div>
        </div>

        <button class="next-btn" id="next-btn">Próxima</button>

        <div class="hangman-container">
            <div class="hint" id="hint-text"></div>

            <svg class="hangman-svg" viewBox="0 0 220 280">
                <line x1="10" y1="270" x2="140" y2="270" stroke="white" stroke-width="6"/>
                <line x1="40" y1="270" x2="40" y2="20" stroke="white" stroke-width="6"/>
                <line x1="40" y1="20" x2="120" y2="20" stroke="white" stroke-width="6"/>
                <line x1="120" y1="20" x2="120" y2="60" stroke="white" stroke-width="6"/>
                <circle id="head" cx="120" cy="80" r="20" stroke="white" stroke-width="5" fill="none" opacity="0"/>
                <line id="body" x1="120" y1="100" x2="120" y2="180" stroke="white" stroke-width="5" opacity="0"/>
                <line id="left-arm" x1="120" y1="130" x2="90" y2="160" stroke="white" stroke-width="5" opacity="0"/>
                <line id="right-arm" x1="120" y1="130" x2="150" y2="160" stroke="white" stroke-width="5" opacity="0"/>
                <line id="left-leg" x1="120" y1="180" x2="90" y2="230" stroke="white" stroke-width="5" opacity="0"/>
                <line id="right-leg" x1="120" y1="180" x2="150" y2="230" stroke="white" stroke-width="5" opacity="0"/>
            </svg>

            <!-- PALAVRA DESCEU E NÃO SOBREPOE MAIS -->
            <div class="word-display" id="word-display"></div>

            <div class="boosts">
                <button class="boost-btn" id="reveal-btn">Revelar Letra (<span id="reveal-count">1</span>)</button>
                <button class="boost-btn" id="skip-btn">Pular Palavra (<span id="skip-count">1</span>)</button>
            </div>

            <div class="message" id="message"></div>

            <div class="keyboard" id="keyboard"></div>
        </div>
    </div>

    <script>
        const clickSound = new Audio('data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAAZGF0YQAAAAA=');
        const winSound   = new Audio('data:audio/wav;base64,UklGRl4AAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAAZGF0YQAAAAA=');
        const wrongSound = new Audio('data:audio/wav;base64,UklGRhwAAABXQVZFZm10IBAAAAABAAEARKwAAEzGAAACABAAZGF0YQAAAAA=');
        const levelUpSound = new Audio('data:audio/wav;base64,UklGRl4AAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAAZGF0YQAAAAA=');

        const allWords = [
            { word: "ZUMBI", hint: "Líder do maior quilombo" },
            { word: "DANDARA", hint: "Guerreira dos Palmares" },
            { word: "SACI", hint: "Menino de uma perna só" },
            { word: "IARA", hint: "Sereia brasileira" },
            { word: "CURUPIRA", hint: "Protetor da floresta" },
            { word: "XANGO", hint: "Orixá do trovão" },
            { word: "OXUM", hint: "Rainha das águas doces" },
            { word: "YEMANJA", hint: "Mãe do mar" },
            { word: "OGUM", hint: "Orixá guerreiro" },
            { word: "OXOSSI", hint: "Caçador sagrado" },
            { word: "AQUALTUNE", hint: "Princesa que fundou Palmares" },
            { word: "PELÉ", hint: "Rei do futebol brasileiro" },
            { word: "CAROLINA", hint: "Autora de Quarto de Despejo" },
            { word: "LELIA", hint: "Grande ativista negra" },
            { word: "CASTRO ALVES", hint: "Poeta do Navio Negreiro" },
            
            // Instrumentos Musicais
            { word: "BERIMBAU", hint: "Instrumento principal da capoeira" },
            { word: "ATABAQUE", hint: "Tambor usado no candomblé" },
            { word: "PANDEIRO", hint: "Instrumento de samba e choro" },
            { word: "CUICA", hint: "Tambor que faz som agudo" },
            { word: "RECO RECO", hint: "Instrumento raspado com vara" },
            { word: "SURDO", hint: "Tambor grande do samba" },
            { word: "AGOGO", hint: "Duas campanas de metal" },
            { word: "TIMBAL", hint: "Tambor de metal afinado" },
            { word: "AFOXE", hint: "Chocalho de contas" },
            { word: "GANZA", hint: "Chocalho cilíndrico" },
            { word: "CAXIXI", hint: "Chocalho de palha" },
            { word: "TAMBOURIN", hint: "Pandeiro pequeno" },
            
            // Comidas Típicas
            { word: "ACARAJE", hint: "Bolinho baiano frito no dendê" },
            { word: "VATAPA", hint: "Prato cremoso com camarão" },
            { word: "CARURU", hint: "Prato de quiabo refogado" },
            { word: "ABARA", hint: "Acarajé cozido na folha" },
            { word: "COCADA", hint: "Doce de coco e açúcar" },
            { word: "PAMONHA", hint: "Doce de milho na palha" },
            { word: "MUNGUNZA", hint: "Doce de milho com leite" },
            { word: "QUINDIM", hint: "Doce amarelo de coco" },
            { word: "FAROFA", hint: "Farinha temperada" },
            { word: "FEIJOADA", hint: "Prato com feijão preto" },
            { word: "BOBÓ", hint: "Prato de camarão com mandioca" },
            { word: "MANIÇOBA", hint: "Prato paraense com maniva" },
            { word: "XINXIM", hint: "Frango com amendoim" },
            { word: "SARAPATEL", hint: "Prato de miúdos temperados" }
        ];

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        let words = shuffle([...allWords]);
        let currentIndex = 0;
        let level = 1;
        let xp = 0;
        let skips = 1;
        let reveals = 1;

        let currentWord = {};
        let displayedWord = [];
        let wrongGuesses = 0;
        const maxWrong = 6;
        const parts = ['head', 'body', 'left-arm', 'right-arm', 'left-leg', 'right-leg'];

        const levelEl = document.getElementById('level');
        const xpFill = document.getElementById('xp-fill');
        const xpText = document.getElementById('xp-text');
        const revealBtn = document.getElementById('reveal-btn');
        const skipBtn = document.getElementById('skip-btn');
        const revealCount = document.getElementById('reveal-count');
        const skipCount = document.getElementById('skip-count');
        const nextBtn = document.getElementById('next-btn');

        function updateUI() {
            levelEl.textContent = level;
            xpFill.style.width = xp + '%';
            xpText.textContent = `${xp} / 100 XP`;
            revealCount.textContent = reveals;
            skipCount.textContent = skips;
            revealBtn.disabled = reveals === 0;
            skipBtn.disabled = skips === 0;
        }

        function play(s) { s.currentTime = 0; s.play().catch(()=>{}); }

        function calculateXPGain() {
            return Math.max(10, 50 - (wrongGuesses * 8));
        }

        function levelUp() {
            level++;
            xp = 0;
            const reward = level % 2 === 0 ? 'skip' : 'reveal';
            if (reward === 'skip') skips++;
            else reveals++;
            play(levelUpSound);
            document.getElementById('message').innerHTML = `
                <div style="color:var(--gold);font-size:2.5rem;">NÍVEL UP!</div>
                Você agora é Nível ${level}!<br>
                +1 ${reward === 'skip' ? 'Pular Palavra' : 'Revelar Letra'}
            `;
            updateUI();
        }

        document.getElementById('play-btn').onclick = () => {
            play(clickSound);
            document.getElementById('menu').style.display = 'none';
            document.getElementById('game').style.display = 'block';
            loadWord();
        };

        nextBtn.onclick = () => { play(clickSound); nextWord(); };
        skipBtn.onclick = () => { 
            if(skips>0){ 
                skips--; 
                xp += 15; 
                checkLevelUp(); 
                play(clickSound); 
                nextWord(); 
                updateUI(); 
            } 
        };
        revealBtn.onclick = () => { 
            if(reveals>0){ 
                reveals--; 
                revealRandomLetter(); 
                updateUI(); 
                play(clickSound); 
            } 
        };

        function loadWord() {
            if (currentIndex >= words.length) {
                words = shuffle([...allWords]);
                currentIndex = 0;
            }
            currentWord = words[currentIndex];
            displayedWord = currentWord.word.split('').map(() => '_');
            wrongGuesses = 0;
            document.getElementById('hint-text').textContent = currentWord.hint;
            document.getElementById('word-display').textContent = displayedWord.join(' ');
            document.getElementById('message').textContent = '';
            nextBtn.style.display = 'none';
            parts.forEach(p => document.getElementById(p).setAttribute('opacity','0'));
            createKeyboard();
            updateUI();
        }

        function nextWord() {
            currentIndex++;
            loadWord();
        }

        function checkLevelUp() {
            if (xp >= 100) levelUp();
        }

        function revealRandomLetter() {
            const hidden = displayedWord.map((l,i) => l==='_' ? i : -1).filter(i => i>=0);
            if (hidden.length > 0) {
                const idx = hidden[Math.floor(Math.random()*hidden.length)];
                displayedWord[idx] = currentWord.word[idx];
                document.getElementById('word-display').textContent = displayedWord.join(' ');
            }
        }

        function createKeyboard() {
            const kb = document.getElementById('keyboard');
            kb.innerHTML = '';
            'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').forEach(l => {
                const btn = document.createElement('button');
                btn.className = 'key';
                btn.textContent = l;
                btn.onclick = () => guessLetter(l, btn);
                kb.appendChild(btn);
            });
        }

        function guessLetter(letter, btn) {
            play(clickSound);
            if (btn.classList.contains('used')) return;
            btn.classList.add('used');

            if (currentWord.word.includes(letter)) {
                btn.classList.add('correct');
                currentWord.word.split('').forEach((l,i) => {
                    if (l===letter) displayedWord[i] = letter;
                });
                document.getElementById('word-display').textContent = displayedWord.join(' ');
                if (!displayedWord.includes('_')) win();
            } else {
                btn.classList.add('wrong');
                play(wrongSound);
                wrongGuesses++;
                document.getElementById(parts[wrongGuesses-1]).setAttribute('opacity','1');
                if (wrongGuesses === maxWrong) lose();
            }
        }

        function win() {
            const xpGain = calculateXPGain();
            document.getElementById('message').innerHTML = `Parabéns! Acertou!<br>+${xpGain} XP (${wrongGuesses} erros)`;
            document.getElementById('message').style.color = 'var(--correct)';
            nextBtn.style.display = 'block';
            play(winSound);
            xp += xpGain;
            checkLevelUp();
            disableKeyboard();
            updateUI();
        }

        function lose() {
            document.getElementById('message').innerHTML = `Game Over!<br>Era: ${currentWord.word}`;
            document.getElementById('message').style.color = 'var(--wrong)';
            nextBtn.style.display = 'block';
            disableKeyboard();
        }

        function disableKeyboard() {
            document.querySelectorAll('.key').forEach(k => k.style.cursor = 'not-allowed');
        }
    </script>
</body>
</html>
