<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ FEIRÃO DA ESCOLA - AFRO MUSICAL ÉPICO</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Orbitron:wght@700;900&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        /* TEMA AVANÇADO: PRETO + ROXO NEON + TOQUES DOURADOS (FEIRÃO ESCOLAR SUPREMO) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            overflow: hidden;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(138, 43, 226, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(75, 0, 130, 0.3) 0%, transparent 50%),
                linear-gradient(45deg, #0f0f0f 0%, #1a1a1a 100%);
        }

        /* Partículas neon + estrelas douradas */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #9d4edd;
            border-radius: 50%;
            box-shadow: 0 0 10px #9d4edd, 0 0 20px #9d4edd;
            animation: float 6s infinite ease-in-out;
            pointer-events: none;
        }

        .star {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ffd700;
            border-radius: 50%;
            box-shadow: 0 0 15px #ffd700, 0 0 30px #ffd700;
            animation: twinkle 2s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.2); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(15px); }
        }

        /* Container */
        #quiz-container {
            display: flex;
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.95), rgba(10, 10, 20, 0.98));
            border: 2px solid #9d4edd;
            border-radius: 25px;
            overflow: hidden;
            max-width: 1300px;
            width: 100%;
            box-shadow: 
                0 0 30px rgba(157, 78, 221, 0.6),
                0 0 60px rgba(157, 78, 221, 0.3),
                inset 0 0 20px rgba(157, 78, 221, 0.1);
            animation: glowPulse 3s infinite alternate;
            position: relative;
            z-index: 10;
        }

        /* Lado Esquerdo - Imagens reais TOPS */
        #image-side {
            flex: 1;
            background: linear-gradient(145deg, #1a0033, #2a0055);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        #school-logo {
            position: absolute;
            top: 20px;
            left: 20px;
            font-family: 'Orbitron', monospace;
            font-size: 1.6em;
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700, 0 0 20px #9d4edd;
            z-index: 10;
        }

        #instrument-image {
            max-width: 90%;
            max-height: 60vh;
            border-radius: 20px;
            border: 3px solid #ffd700;
            box-shadow: 
                0 0 20px rgba(255, 215, 0, 0.8),
                0 0 40px rgba(157, 78, 221, 0.4);
            transition: all 0.6s ease;
            animation: imageGlow 2s infinite alternate;
        }

        #instrument-image:hover {
            transform: rotate(5deg) scale(1.08);
            border-color: #c689ff;
        }

        /* Lado Direito */
        #content-side {
            flex: 1.4;
            padding: 40px;
            display: flex;
            flex-direction: column;
            background: linear-gradient(145deg, rgba(15, 15, 25, 0.98), rgba(25, 25, 40, 0.95));
            position: relative;
        }

        /* Cabeçalho */
        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        h1 {
            font-family: 'Bebas Neue', cursive;
            font-size: 3.5em;
            color: #ffd700;
            text-shadow: 
                0 0 10px #ffd700,
                3px 3px 0 #9d4edd;
            letter-spacing: 3px;
            animation: titleGlow 2s infinite alternate;
        }

        #player-info {
            background: rgba(157, 78, 221, 0.2);
            padding: 10px 20px;
            border-radius: 15px;
            border: 1px solid #ffd700;
            font-weight: bold;
            color: #fff;
            text-align: center;
        }

        /* Progresso */
        #progress-bar-container {
            width: 100%;
            height: 12px;
            background: #333;
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
            border: 1px solid #ffd700;
        }

        #progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #9d4edd, #ffd700);
            transition: width 0.4s ease;
            box-shadow: 0 0 10px #ffd700;
        }

        #stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat {
            background: rgba(255, 215, 0, 0.15);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid #ffd700;
            font-weight: bold;
            color: #ffd700;
            min-width: 120px;
            text-align: center;
        }

        /* Pergunta */
        #question {
            font-size: 1.8em;
            margin: 25px 0;
            line-height: 1.4;
            color: #fff;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
            padding: 20px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 15px;
            border-left: 5px solid #ffd700;
        }

        /* Opções em grid */
        #options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 18px;
            margin-bottom: 25px;
        }

        .option {
            background: linear-gradient(145deg, #1a0033, #2a0055);
            border: 2px solid #ffd700;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.4s ease;
            color: #e0e0e0;
            text-align: center;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .option:hover {
            transform: translateY(-6px);
            border-color: #c689ff;
            box-shadow: 0 15px 30px rgba(255, 215, 0, 0.4);
            background: linear-gradient(145deg, #2a0055, #ffd70030);
        }

        .option.correct {
            background: linear-gradient(145deg, #1e7b1e, #2ecc71);
            border-color: #ffd700;
            animation: correctPulse 0.8s ease;
        }

        .option.incorrect {
            background: linear-gradient(145deg, #8B0000, #DC143C);
            border-color: #ffd700;
            animation: shake 0.6s ease;
        }

        /* Controles com mais funcs */
        #controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        #controls button {
            flex: 1;
            min-width: 100px;
            padding: 14px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(145deg, #9d4edd, #ffd700);
            color: #0a0a0a;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        #controls button:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.6);
        }

        #controls button:disabled {
            background: #444;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Dica e explicação com shimmer */
        #hint-text, #explanation {
            background: rgba(255, 215, 0, 0.2);
            padding: 18px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: none;
            font-style: italic;
            color: #ffd700;
            border: 1px dashed #9d4edd;
            position: relative;
        }

        /* Botão próximo */
        #next-btn {
            align-self: flex-end;
            padding: 16px 40px;
            background: linear-gradient(145deg, #27ae60, #ffd700);
            color: #0a0a0a;
            border: none;
            border-radius: 15px;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.4s ease;
            display: none;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }

        #next-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(255, 215, 0, 0.7);
        }

        /* Tela final com mais stats */
        #end-screen {
            display: none;
            text-align: center;
            padding: 40px;
            background: linear-gradient(145deg, rgba(20, 20, 40, 0.98), rgba(10, 10, 30, 0.98));
            border-radius: 20px;
            border: 2px solid #ffd700;
        }

        #end-screen h2 {
            font-size: 4em;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #9d4edd;
        }

        #final-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .final-stat {
            background: rgba(255, 215, 0, 0.2);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #ffd700;
            font-size: 1.2em;
            color: #fff;
        }

        /* Áudios para feedback */
        audio { display: none; }

        /* Controles extras */
        #pause-btn, #share-btn {
            position: absolute;
            padding: 12px 20px;
            background: linear-gradient(145deg, #9d4edd, #ffd700);
            color: #0a0a0a;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
            z-index: 100;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #pause-btn { top: 80px; right: 20px; }
        #share-btn { top: 140px; right: 20px; }

        #music-control { top: 20px; right: 20px; }
        #fullscreen-btn { top: 20px; right: 180px; }

        #pause-btn:hover, #share-btn:hover {
            transform: scale(1.1);
        }

        /* Responsivo */
        @media (max-width: 1000px) {
            #quiz-container { flex-direction: column; }
            #image-side { padding: 20px; }
            #instrument-image { max-height: 40vh; }
            #options { grid-template-columns: 1fr; }
        }

        @media (max-width: 600px) {
            h1 { font-size: 2.5em; }
            #question { font-size: 1.4em; }
            #controls { flex-direction: column; }
            #stats { flex-direction: column; }
        }
    </style>
</head>
<body>

    <!-- Áudios -->
    <audio id="bg-music" loop src="https://www.soundjay.com/free-music/sounds/samba-01.mp3"></audio>
    <audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
    <audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
    <audio id="win-sound" src="https://www.soundjay.com/buttons/sounds/button-1.mp3"></audio>

    <!-- Botões extras -->
    <button id="music-control" onclick="toggleMusic()">
        <i class="fas fa-play"></i> Samba ON
    </button>
    <button id="fullscreen-btn" onclick="toggleFullscreen()">
        <i class="fas fa-expand"></i> Tela Cheia
    </button>
    <button id="pause-btn" onclick="togglePause()">
        <i class="fas fa-pause"></i> Pausar
    </button>
    <button id="share-btn" onclick="shareScore()">
        <i class="fas fa-share"></i> Compartilhar
    </button>

    <div id="quiz-container">
        <!-- Lado Esquerdo -->
        <div id="image-side">
            <div id="school-logo">FEIRÃO ESCOLA 2025 - AFRO MUSICAL</div>
            <img id="instrument-image" src="" alt="Instrumento TOP">
        </div>

        <!-- Lado Direito -->
        <div id="content-side">
            <div id="header">
                <h1>QUIZ AFRO ÉPICO</h1>
                <div id="player-info">Jogador: <span id="player-name">Anônimo</span></div>
            </div>

            <div id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>

            <div id="stats">
                <div class="stat">Pergunta <span id="current">1</span>/10</div>
                <div class="stat">Pontos: <span id="score-value">0</span></div>
                <div class="stat">Tempo: <span id="time-left">30</span>s</div>
                <div class="stat">Vidas: <span id="lives">3</span> <i class="fas fa-heart" style="color:#ffd700;"></i></div>
            </div>

            <div id="question"></div>
            <div id="hint-text"></div>
            <div id="options"></div>
            <div id="explanation"></div>

            <div id="controls">
                <button id="hint-btn"><i class="fas fa-lightbulb"></i> Dica</button>
                <button id="fifty-btn"><i class="fas fa-cut"></i> 50/50</button>
                <button id="skip-btn"><i class="fas fa-forward"></i> Pular (1x)</button>
                <button id="extra-time-btn"><i class="fas fa-clock"></i> +10s</button>
                <button id="shuffle-btn"><i class="fas fa-random"></i> Embaralhar</button>
            </div>

            <button id="next-btn"><i class="fas fa-arrow-right"></i> PRÓXIMA</button>

            <!-- Tela Final -->
            <div id="end-screen">
                <h2>PARABÉNS, SAMBISTA!</h2>
                <div id="final-stats">
                    <div class="final-stat">Pontuação<br><strong><span id="final-score">0</span></strong></div>
                    <div class="final-stat">Acertos<br><strong><span id="correct-answers">0</span></strong></div>
                    <div class="final-stat">Erros<br><strong><span id="wrong-answers">0</span></strong></div>
                    <div class="final-stat">Tempo Médio<br><strong><span id="avg-time">0</span>s</strong></div>
                    <div class="final-stat">Nível<br><strong><span id="level">Iniciante</span></strong></div>
                </div>
                <p style="margin: 20px 0; font-size: 1.2em;">Melhor recorde: <strong><span id="high-score">0</span></strong></p>
                <button onclick="location.reload()" style="margin-top: 20px; padding: 15px 40px; font-size: 1.3em; background: linear-gradient(145deg, #9d4edd, #ffd700); border: none; border-radius: 15px; color: #0a0a0a; cursor: pointer;">
                    JOGAR NOVAMENTE
                </button>
            </div>
        </div>
    </div>

    <script>
        // Perguntas com imagens reais TOPS (alta qualidade, reais)
        const questions = [
            {
                question: "Qual instrumento lidera a capoeira?",
                options: ["Atabaque", "Berimbau", "Pandeiro", "Cuíca"],
                correct: 1,
                hint: "Arco com cabaça, corda única, dita o ritmo da roda.",
                imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Berimbau.jpg/1200px-Berimbau.jpg",
                explanation: "O Berimbau é o mestre da capoeira. Toques como Angola ou São Bento mudam tudo!"
            },
            {
                question: "O Atabaque é essencial em qual ritual?",
                options: ["Samba", "Candomblé", "Forró", "Frevo"],
                correct: 1,
                hint: "Tambores sagrados para orixás, com 3 tamanhos.",
                imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Atabaque_%28confeccionado_por_Pancho_Pi%C3%B1ones%29.JPG/1200px-Atabaque_%28confeccionado_por_Pancho_Pi%C3%B1ones%29.JPG",
                explanation: "No Candomblé, rum, rumpi e lê conectam ao divino."
            },
            {
                question: "A Kora tem quantas cordas?",
                options: ["10", "15", "21", "25"],
                correct: 2,
                hint: "Harpa africana dos griots, influenciou o Brasil.",
                imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Kora.jpg/1200px-Kora.jpg",
                explanation: "21 cordas para histórias antigas da África Ocidental."
            },
            {
                question: "No samba, o Surdo faz os:",
                options: ["Agudos", "Graves", "Médios", "Sopros"],
                correct: 1,
                hint: "Tambor grave que pulsa o coração do ritmo.",
                imageUrl: "https://pearldrum.com/sites/default/files/image_folder/PRODUCTS/OTHER/PRODUCT_THUMBNAIL%235/PERCUSSION/PBS2018_20x18%20Surdo_IMG_5thumbnail_SURDO.jpg",
                explanation: "Graves profundos para o balanço perfeito no carnaval."
            },
            {
                question: "Berimbau tem quantas cordas?",
                options: ["1", "2", "3", "4"],
                correct: 0,
                hint: "Só uma, mas com mágica africana.",
                imageUrl: "https://centerforworldmusic.org/wp-content/uploads/2015/06/berimbaus04_1-1030x684.jpg",
                explanation: "Uma corda de arame para tons variados."
            },
            {
                question: "Qual instrumento imita vozes no samba?",
                options: ["Cuíca", "Reco-reco", "Ganzá", "Cabasa"],
                correct: 0,
                hint: "Fricção que faz sons como animais ou risos.",
                imageUrl: "https://m.media-amazon.com/images/I/71T4bDKGZfL.jpg",
                explanation: "A Cuíca é a alma expressiva do samba."
            },
            {
                question: "O Agogô é de:",
                options: ["Metal", "Madeira", "Couro", "Osso"],
                correct: 0,
                hint: "Sinos duplos de ferro africano.",
                imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Modern-Agogo.jpg/1200px-Modern-Agogo.jpg",
                explanation: "Marca tempo em ritmos afro-brasileiros."
            },
            {
                question: "Pandeiro reina no:",
                options: ["Capoeira", "Candomblé", "Samba", "Maracatu"],
                correct: 2,
                hint: "Com platinelas, viradas incríveis.",
                imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Pandeiro.jpg/1200px-Pandeiro.jpg",
                explanation: "Percussão que canta no samba."
            },
            {
                question: "Afoxé é chocalho de:",
                options: ["Tambor", "Cabaça", "Apito", "Flauta"],
                correct: 1,
                hint: "Para Oxum, paz no ijexá.",
                imageUrl: "https://i.ebayimg.com/images/g/TMcAAOSwywxgWWwL/s-l400.jpg",
                explanation: "Cabaça com contas sagradas."
            },
            {
                question: "Alfaia central no:",
                options: ["Alfaia", "Atabaque", "Berimbau", "Surdo"],
                correct: 0,
                hint: "Tambor gigante de Pernambuco.",
                imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Alfaia_3.jpg/1200px-Alfaia_3.jpg",
                explanation: "No Maracatu, batidas poderosas."
            }
        ];

        // Shuffle perguntas para variety
        questions.sort(() => 0.5 - Math.random());

        let currentQuestion = 0;
        let score = 0;
        let lives = 3;
        let answered = false;
        let fiftyUsed = false;
        let skipUsed = false;
        let extraTimeUsed = false;
        let shuffleUsed = false;
        let timerInterval;
        let questionStartTime;
        let totalTime = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let isPaused = false;
        const TIME_LIMIT = 30;

        const elements = {
            instrumentImage: document.getElementById('instrument-image'),
            question: document.getElementById('question'),
            options: document.getElementById('options'),
            progress: document.getElementById('current'),
            progressBar: document.getElementById('progress-bar'),
            scoreValue: document.getElementById('score-value'),
            timeLeft: document.getElementById('time-left'),
            lives: document.getElementById('lives'),
            hintText: document.getElementById('hint-text'),
            explanation: document.getElementById('explanation'),
            hintBtn: document.getElementById('hint-btn'),
            fiftyBtn: document.getElementById('fifty-btn'),
            skipBtn: document.getElementById('skip-btn'),
            extraTimeBtn: document.getElementById('extra-time-btn'),
            shuffleBtn: document.getElementById('shuffle-btn'),
            nextBtn: document.getElementById('next-btn'),
            endScreen: document.getElementById('end-screen'),
            finalScore: document.getElementById('final-score'),
            correctAnswersEl: document.getElementById('correct-answers'),
            wrongAnswersEl: document.getElementById('wrong-answers'),
            avgTime: document.getElementById('avg-time'),
            level: document.getElementById('level'),
            highScore: document.getElementById('high-score'),
            playerName: document.getElementById('player-name')
        };

        const correctSound = document.getElementById('correct-sound');
        const wrongSound = document.getElementById('wrong-sound');
        const winSound = document.getElementById('win-sound');

        // Nome do jogador
        const playerName = prompt("Seu nome pro Feirão Afro:", "Sambista") || "Anônimo";
        elements.playerName.textContent = playerName;

        function createParticles() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.style.left = Math.random() * 100 + 'vw';
                    p.style.top = Math.random() * 100 + 'vh';
                    p.style.animationDelay = Math.random() * 6 + 's';
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), 6000);
                }, i * 100);
            }
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const s = document.createElement('div');
                    s.className = 'star';
                    s.style.left = Math.random() * 100 + 'vw';
                    s.style.top = Math.random() * 100 + 'vh';
                    s.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(s);
                    setTimeout(() => s.remove(), 4000);
                }, i * 150);
            }
        }
        setInterval(createParticles, 600);

        function showQuestion() {
            clearInterval(timerInterval);
            if (currentQuestion >= questions.length) {
                endQuiz();
                return;
            }

            const q = questions[currentQuestion];
            elements.instrumentImage.src = q.imageUrl;
            elements.question.textContent = q.question;
            elements.progress.textContent = currentQuestion + 1;
            elements.progressBar.style.width = ((currentQuestion + 1) / questions.length * 100) + '%';

            answered = false;
            fiftyUsed = false;
            shuffleUsed = false;
            elements.hintText.style.display = 'none';
            elements.explanation.style.display = 'none';
            elements.nextBtn.style.display = 'none';
            elements.skipBtn.disabled = skipUsed;
            elements.extraTimeBtn.disabled = extraTimeUsed;
            elements.shuffleBtn.disabled = false;

            renderOptions(shuffleArray([...q.options]));
            elements.fiftyBtn.disabled = false;

            questionStartTime = Date.now();
            startTimer();
        }

        function renderOptions(opts) {
            elements.options.innerHTML = '';
            opts.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.innerHTML = `<strong>${String.fromCharCode(65 + index)}.</strong> ${opt}`;
                btn.onclick = () => selectOption(opts.indexOf(questions[currentQuestion].options[questions[currentQuestion].correct]) === index ? questions[currentQuestion].correct : -1);
                elements.options.appendChild(btn);
            });
        }

        function selectOption(isCorrect) {
            if (answered) return;
            answered = true;
            clearInterval(timerInterval);

            const timeTaken = Math.round((Date.now() - questionStartTime) / 1000);
            totalTime += timeTaken;

            const q = questions[currentQuestion];
            const correctIndex = q.options.indexOf(q.options[q.correct]);

            const buttons = elements.options.querySelectorAll('.option');
            buttons.forEach((btn, i) => {
                if (i === correctIndex) {
                    btn.classList.add('correct');
                } else if (!isCorrect && btn.textContent.includes(buttons[i].textContent)) {
                    btn.classList.add('incorrect');
                }
                btn.style.pointerEvents = 'none';
            });

            if (isCorrect) {
                score += 10;
                correctAnswers++;
                correctSound.play();
                elements.scoreValue.textContent = score;
                elements.explanation.innerHTML = `${q.explanation} <br><strong style="color:#2ecc71;">+10 PONTOS!</strong>`;
            } else {
                wrongAnswers++;
                lives--;
                wrongSound.play();
                elements.lives.textContent = lives;
                elements.explanation.innerHTML = `${q.explanation} <br><strong style="color:#e74c3c;">Resposta certa: ${q.options[q.correct]}</strong>`;
                if (lives <= 0) {
                    setTimeout(endQuiz, 2000);
                    return;
                }
            }
            elements.explanation.style.display = 'block';
            elements.nextBtn.style.display = 'block';
        }

        function startTimer() {
            let time = TIME_LIMIT;
            elements.timeLeft.textContent = time;
            timerInterval = setInterval(() => {
                if (isPaused) return;
                time--;
                elements.timeLeft.textContent = time;
                if (time <= 0) {
                    selectOption(false);
                }
            }, 1000);
        }

        function showHint() {
            const q = questions[currentQuestion];
            elements.hintText.textContent = q.hint;
            elements.hintText.style.display = 'block';
            score = Math.max(0, score - 2);
            elements.scoreValue.textContent = score;
        }

        function fiftyFifty() {
            if (answered || fiftyUsed) return;
            fiftyUsed = true;
            elements.fiftyBtn.disabled = true;

            const q = questions[currentQuestion];
            let wrongIndices = [];
            for (let i = 0; i < q.options.length; i++) {
                if (i !== q.correct) wrongIndices.push(i);
            }
            wrongIndices.sort(() => 0.5 - Math.random());
            const remove1 = wrongIndices[0], remove2 = wrongIndices[1];

            const newOpts = q.options.filter((_, i) => i !== remove1 && i !== remove2);
            renderOptions(newOpts);
        }

        function skip() {
            if (answered || skipUsed) return;
            skipUsed = true;
            elements.skipBtn.disabled = true;
            score = Math.max(0, score - 5);
            elements.scoreValue.textContent = score;
            currentQuestion++;
            showQuestion();
        }

        function extraTime() {
            if (answered || extraTimeUsed) return;
            extraTimeUsed = true;
            elements.extraTimeBtn.disabled = true;
            clearInterval(timerInterval);
            const currentTime = parseInt(elements.timeLeft.textContent);
            startTimerWithTime(currentTime + 10);
            score = Math.max(0, score - 3);
            elements.scoreValue.textContent = score;
        }

        function startTimerWithTime(start) {
            let time = start;
            elements.timeLeft.textContent = time;
            timerInterval = setInterval(() => {
                if (isPaused) return;
                time--;
                elements.timeLeft.textContent = time;
                if (time <= 0) {
                    selectOption(false);
                }
            }, 1000);
        }

        function shuffleOptions() {
            if (answered || shuffleUsed) return;
            shuffleUsed = true;
            elements.shuffleBtn.disabled = true;
            const q = questions[currentQuestion];
            renderOptions(shuffleArray([...q.options]));
            score = Math.max(0, score - 1);
            elements.scoreValue.textContent = score;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function endQuiz() {
            document.getElementById('bg-music').pause();
            winSound.play();
            document.querySelectorAll('#image-side, #content-side > *:not(#end-screen)').forEach(el => el.style.display = 'none');

            elements.finalScore.textContent = score;
            elements.correctAnswersEl.textContent = correctAnswers;
            elements.wrongAnswersEl.textContent = wrongAnswers;
            elements.avgTime.textContent = correctAnswers > 0 ? Math.round(totalTime / correctAnswers) : 0;
            elements.level.textContent = score > 80 ? 'Mestre Afro' : score > 50 ? 'Sambista' : 'Iniciante';

            let highScore = localStorage.getItem('afroHighScore') || 0;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('afroHighScore', highScore);
            }
            elements.highScore.textContent = highScore;

            elements.endScreen.style.display = 'block';
        }

        function toggleMusic() {
            const music = document.getElementById('bg-music');
            const btn = document.getElementById('music-control');
            if (music.paused) {
                music.play().catch(() => {});
                btn.innerHTML = '<i class="fas fa-pause"></i> Samba ON';
            } else {
                music.pause();
                btn.innerHTML = '<i class="fas fa-play"></i> Samba OFF';
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        function togglePause() {
            isPaused = !isPaused;
            const btn = document.getElementById('pause-btn');
            btn.innerHTML = isPaused ? '<i class="fas fa-play"></i> Retomar' : '<i class="fas fa-pause"></i> Pausar';
            if (!isPaused) startTimer(); // Reinicia se despausar
        }

        function shareScore() {
            alert(`Ei, ${playerName}! Sua pontuação épica: ${score}/100! Compartilhe no X: "Arrasei no Quiz Afro do Feirão 2025 com ${score} pts! #AfroMusical"`);
        }

        // Eventos
        elements.hintBtn.onclick = showHint;
        elements.fiftyBtn.onclick = fiftyFifty;
        elements.skipBtn.onclick = skip;
        elements.extraTimeBtn.onclick = extraTime;
        elements.shuffleBtn.onclick = shuffleOptions;
        elements.nextBtn.onclick = nextQuestion;

        // Iniciar
        showQuestion();
    </script>
</body>
</html>